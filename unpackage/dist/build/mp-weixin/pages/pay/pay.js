(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/pay/pay"],{"443f":function(e,t,n){"use strict";n.r(t);var r=n("e11a"),o=n.n(r);for(var a in r)"default"!==a&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=o.a},"4bd4":function(e,t,n){},"651b":function(e,t,n){"use strict";var r={listCell:function(){return n.e("components/list-cell/list-cell").then(n.bind(null,"5e60"))},modal:function(){return n.e("components/modal/modal").then(n.bind(null,"62d6"))}},o=function(){var e=this,t=e.$createElement,n=(e._self._c,parseFloat(e.store.packing_fee)),r=parseFloat(e.store.delivery_cost);e._isMounted||(e.e0=function(t){e.ensureAddressModalVisible=!1}),e.$mp.data=Object.assign({},{$root:{m0:n,m1:r}})},a=[];n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return r}))},"797e":function(e,t,n){"use strict";(function(e){n("c7e6");r(n("66fd"));var t=r(n("8874"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},8874:function(e,t,n){"use strict";n.r(t);var r=n("651b"),o=n("443f");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("f781");var i,s=n("f0c5"),c=Object(s["a"])(o["default"],r["b"],r["c"],!1,null,"ead0a454",null,!1,r["a"],i);t["default"]=c.exports},e11a:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("4795")),o=n("2f62"),a=i(n("2d7b"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){s(a,r,o,i,c,"next",e)}function c(e){s(a,r,o,i,c,"throw",e)}i(void 0)}))}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(){n.e("components/list-cell/list-cell").then(function(){return resolve(n("5e60"))}.bind(null,n)).catch(n.oe)},m=function(){n.e("components/modal/modal").then(function(){return resolve(n("62d6"))}.bind(null,n)).catch(n.oe)},p={components:{listCell:d,modal:m},data:function(){return{cart:[],form:{name:"",address:"",mobile:"",remark:""},ensureAddressModalVisible:!1}},computed:l({},(0,o.mapState)(["orderType","address","store"]),{total:function(){return this.cart.reduce((function(e,t){return e+t.number*t.price}),0)},amount:function(){return this.cart.reduce((function(e,t){return e+t.number*t.price}),0)}}),onLoad:function(t){var n=t.remark;this.cart=e.getStorageSync("cart"),n&&this.$set(this.form,"remark",n)},methods:{goToRemark:function(){e.navigateTo({url:"/pages/remark/remark?remark="+this.form.remark})},goToResolve:function(){var e=(0,a.default)(this.form.address);if(e.name&&e.phone){var t=e.province+e.city+e.area+e.detail;this.$set(this.form,"mobile",e.phone),this.$set(this.form,"name",e.name),this.$set(this.form,"address",t)}},chooseAddress:function(){e.navigateTo({url:"/pages/address/address?is_choose=true&scene=pay"})},goToPackages:function(){e.navigateTo({url:"/pages/packages/index"})},submit:function(){"takeout"==this.orderType?this.ensureAddressModalVisible=!0:this.form.address.length&&this.form.name.length&&this.form.mobile.length?this.pay():e.showToast({title:"请检查地址，姓名，电话不可为空"})},pay:function(){var t=this;return c(r.default.mark((function n(){var o,a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.showLoading({title:"加载中"}),o=t.cart,n.next=4,t.$fuck("orders/post",{info:t.form,goods:o},"POST");case 4:a=n.sent,wx.requestPayment(l({},a,{success:function(t){e.showToast({title:"支付成功"}),e.removeStorageSync("cart"),e.reLaunch({url:"/pages/orders/orders"}),e.hideLoading()},fail:function(t){console.log(t),e.hideLoading()},complete:function(e){}}));case 6:case"end":return n.stop()}}),n)})))()}}};t.default=p}).call(this,n("543d")["default"])},f781:function(e,t,n){"use strict";var r=n("4bd4"),o=n.n(r);o.a}},[["797e","common/runtime","common/vendor"]]]);